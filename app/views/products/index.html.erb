

<% @products.each do |product| %>
<h1><%= product.name %></h1>
<div id="product-<%=product.id%>">
  <%= truncate product.description %></div>
  <button class="js-more" data-id="<%=product.id%>">More Info</button>

<% end %>

<script type="text/javascript">
  $(function () {
    $(".js-more").on('click', function() {
      let id = $(this).data("id");
        $.get("/products/" + id + "/description", function(data) {
          $.get("/products" + id + "/inventory", function(inventory) {
            let inventoryText = "Available"
            if (inventory === "false") {
              inventoryText = "Sold Out"
            }
            let description = "<p>" + data + "</p><p>" + inventoryText + "</p>";
            $("#product-" + id).html(description);
          })
      });
    });
  });

</script>
